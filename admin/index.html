<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة إدارة AliensStore</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Cairo', sans-serif; }
        .arabic-nums { direction: ltr; unicode-bidi: embed; }
        [dir="rtl"] { text-align: right; }
        .dark { --tw-bg-opacity: 1; background-color: rgb(15 23 42 / var(--tw-bg-opacity)); }
    </style>
</head>
<body>
    <div id="admin-root"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // API Service
        const API_BASE_URL = 'http://localhost:8000/api';

        class AdminApiService {
            constructor() {
                this.token = localStorage.getItem('admin_token');
            }

            async request(endpoint, options = {}) {
                const url = `${API_BASE_URL}${endpoint}`;
                const config = {
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        ...(this.token && { Authorization: `Bearer ${this.token}` }),
                        ...options.headers,
                    },
                    ...options,
                };

                try {
                    const response = await fetch(url, config);
                    if (!response.ok) {
                        if (response.status === 401) {
                            this.logout();
                            throw new Error('Unauthorized');
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error('API request failed:', error);
                    throw error;
                }
            }

            async login(email, password) {
                const response = await this.request('/admin/login', {
                    method: 'POST',
                    body: JSON.stringify({ email, password }),
                });
                this.token = response.token;
                localStorage.setItem('admin_token', response.token);
                return response;
            }

            logout() {
                this.token = null;
                localStorage.removeItem('admin_token');
            }

            // Dashboard
            async getDashboardStats() {
                return this.request('/admin/dashboard/stats');
            }

            // Products
            async getProducts(params = {}) {
                const queryString = new URLSearchParams(params).toString();
                return this.request(`/admin/products${queryString ? '?' + queryString : ''}`);
            }

            async createProduct(productData) {
                return this.request('/admin/products', {
                    method: 'POST',
                    body: JSON.stringify(productData),
                });
            }

            async updateProduct(id, productData) {
                return this.request(`/admin/products/${id}`, {
                    method: 'PUT',
                    body: JSON.stringify(productData),
                });
            }

            async deleteProduct(id) {
                return this.request(`/admin/products/${id}`, {
                    method: 'DELETE',
                });
            }

            // Categories
            async getCategories() {
                return this.request('/admin/categories');
            }

            async createCategory(categoryData) {
                return this.request('/admin/categories', {
                    method: 'POST',
                    body: JSON.stringify(categoryData),
                });
            }

            async updateCategory(id, categoryData) {
                return this.request(`/admin/categories/${id}`, {
                    method: 'PUT',
                    body: JSON.stringify(categoryData),
                });
            }

            async deleteCategory(id) {
                return this.request(`/admin/categories/${id}`, {
                    method: 'DELETE',
                });
            }

            // Orders
            async getOrders(params = {}) {
                const queryString = new URLSearchParams(params).toString();
                return this.request(`/admin/orders${queryString ? '?' + queryString : ''}`);
            }

            async updateOrderStatus(id, status) {
                return this.request(`/admin/orders/${id}/status`, {
                    method: 'PUT',
                    body: JSON.stringify({ status }),
                });
            }

            // Customers
            async getCustomers(params = {}) {
                const queryString = new URLSearchParams(params).toString();
                return this.request(`/admin/customers${queryString ? '?' + queryString : ''}`);
            }

            // Settings
            async getSettings() {
                return this.request('/admin/settings');
            }

            async updateSettings(settings) {
                return this.request('/admin/settings', {
                    method: 'PUT',
                    body: JSON.stringify(settings),
                });
            }
        }

        const adminApi = new AdminApiService();

        // Context for admin state
        const AdminContext = createContext();

        const AdminProvider = ({ children }) => {
            const [user, setUser] = useState(null);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [loading, setLoading] = useState(true);
            const [darkMode, setDarkMode] = useState(localStorage.getItem('admin_dark_mode') === 'true');
            const [language, setLanguage] = useState(localStorage.getItem('admin_language') || 'ar');

            useEffect(() => {
                const token = localStorage.getItem('admin_token');
                if (token) {
                    setIsAuthenticated(true);
                }
                setLoading(false);
            }, []);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.setItem('admin_dark_mode', darkMode);
            }, [darkMode]);

            useEffect(() => {
                document.documentElement.lang = language;
                document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
                localStorage.setItem('admin_language', language);
            }, [language]);

            const login = async (email, password) => {
                try {
                    const response = await adminApi.login(email, password);
                    setUser(response.user);
                    setIsAuthenticated(true);
                    return true;
                } catch (error) {
                    console.error('Login failed:', error);
                    return false;
                }
            };

            const logout = () => {
                adminApi.logout();
                setUser(null);
                setIsAuthenticated(false);
            };

            const toggleDarkMode = () => setDarkMode(!darkMode);
            const toggleLanguage = () => setLanguage(language === 'ar' ? 'en' : 'ar');

            return (
                <AdminContext.Provider value={{
                    user,
                    isAuthenticated,
                    loading,
                    darkMode,
                    language,
                    login,
                    logout,
                    toggleDarkMode,
                    toggleLanguage
                }}>
                    {children}
                </AdminContext.Provider>
            );
        };

        const useAdmin = () => {
            const context = useContext(AdminContext);
            if (!context) {
                throw new Error('useAdmin must be used within AdminProvider');
            }
            return context;
        };

        // Translation helper
        const translations = {
            ar: {
                'dashboard': 'لوحة التحكم',
                'products': 'المنتجات',
                'categories': 'التصنيفات',
                'orders': 'الطلبات',
                'customers': 'العملاء',
                'settings': 'الإعدادات',
                'login': 'تسجيل الدخول',
                'logout': 'تسجيل الخروج',
                'email': 'البريد الإلكتروني',
                'password': 'كلمة المرور',
                'total_sales': 'إجمالي المبيعات',
                'total_orders': 'إجمالي الطلبات',
                'total_customers': 'إجمالي العملاء',
                'total_products': 'إجمالي المنتجات',
                'add_product': 'إضافة منتج',
                'edit': 'تعديل',
                'delete': 'حذف',
                'save': 'حفظ',
                'cancel': 'إلغاء',
                'name': 'الاسم',
                'price': 'السعر',
                'category': 'الفئة',
                'status': 'الحالة',
                'actions': 'الإجراءات',
                'search': 'بحث...',
                'loading': 'جاري التحميل...',
                'no_data': 'لا توجد بيانات',
                'confirm_delete': 'هل أنت متأكد من الحذف؟'
            },
            en: {
                'dashboard': 'Dashboard',
                'products': 'Products',
                'categories': 'Categories',
                'orders': 'Orders',
                'customers': 'Customers',
                'settings': 'Settings',
                'login': 'Login',
                'logout': 'Logout',
                'email': 'Email',
                'password': 'Password',
                'total_sales': 'Total Sales',
                'total_orders': 'Total Orders',
                'total_customers': 'Total Customers',
                'total_products': 'Total Products',
                'add_product': 'Add Product',
                'edit': 'Edit',
                'delete': 'Delete',
                'save': 'Save',
                'cancel': 'Cancel',
                'name': 'Name',
                'price': 'Price',
                'category': 'Category',
                'status': 'Status',
                'actions': 'Actions',
                'search': 'Search...',
                'loading': 'Loading...',
                'no_data': 'No data available',
                'confirm_delete': 'Are you sure you want to delete?'
            }
        };

        const useTranslation = () => {
            const { language } = useAdmin();
            const t = (key) => translations[language][key] || key;
            return { t };
        };

        // Login Component
        const LoginPage = () => {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(false);
            const { login, darkMode, toggleDarkMode, toggleLanguage } = useAdmin();
            const { t } = useTranslation();

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                const success = await login(email, password);
                if (!success) {
                    alert('فشل تسجيل الدخول');
                }
                setLoading(false);
            };

            return (
                <div className={`min-h-screen flex items-center justify-center ${darkMode ? 'dark bg-slate-900' : 'bg-gray-50'}`}>
                    <div className="max-w-md w-full space-y-8 p-8">
                        <div className="text-center">
                            <div className="flex justify-center mb-4">
                                <div className="bg-orange-600 p-3 rounded-full">
                                    <i className="fas fa-laptop text-white text-2xl"></i>
                                </div>
                            </div>
                            <h2 className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                                لوحة إدارة AliensStore
                            </h2>
                            <p className={`mt-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>
                                {t('login')}
                            </p>
                        </div>

                        <div className="flex justify-center space-x-4 mb-6">
                            <button
                                onClick={toggleDarkMode}
                                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-700'}`}
                            >
                                <i className={`fas ${darkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                            </button>
                            <button
                                onClick={toggleLanguage}
                                className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-700'}`}
                            >
                                العربية / EN
                            </button>
                        </div>

                        <form className="space-y-6" onSubmit={handleSubmit}>
                            <div>
                                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                    {t('email')}
                                </label>
                                <input
                                    type="email"
                                    required
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 ${
                                        darkMode 
                                            ? 'bg-gray-700 border-gray-600 text-white' 
                                            : 'bg-white border-gray-300 text-gray-900'
                                    }`}
                                />
                            </div>

                            <div>
                                <label className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>
                                    {t('password')}
                                </label>
                                <input
                                    type="password"
                                    required
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 ${
                                        darkMode 
                                            ? 'bg-gray-700 border-gray-600 text-white' 
                                            : 'bg-white border-gray-300 text-gray-900'
                                    }`}
                                />
                            </div>

                            <button
                                type="submit"
                                disabled={loading}
                                className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50"
                            >
                                {loading ? t('loading') : t('login')}
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // Dashboard Stats Component
        const DashboardStats = () => {
            const [stats, setStats] = useState(null);
            const [loading, setLoading] = useState(true);
            const { darkMode } = useAdmin();
            const { t } = useTranslation();

            useEffect(() => {
                const fetchStats = async () => {
                    try {
                        const data = await adminApi.getDashboardStats();
                        setStats(data);
                    } catch (error) {
                        console.error('Failed to fetch stats:', error);
                        // Fallback data
                        setStats({
                            total_sales: 125000,
                            total_orders: 1234,
                            total_customers: 856,
                            total_products: 67
                        });
                    } finally {
                        setLoading(false);
                    }
                };

                fetchStats();
            }, []);

            if (loading) {
                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        {[...Array(4)].map((_, i) => (
                            <div key={i} className={`p-6 rounded-lg shadow animate-pulse ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                <div className="h-4 bg-gray-300 rounded mb-2"></div>
                                <div className="h-8 bg-gray-300 rounded"></div>
                            </div>
                        ))}
                    </div>
                );
            }

            const statCards = [
                { key: 'total_sales', icon: 'fa-dollar-sign', color: 'text-green-600', value: stats?.total_sales, suffix: ' جنيه' },
                { key: 'total_orders', icon: 'fa-shopping-cart', color: 'text-blue-600', value: stats?.total_orders },
                { key: 'total_customers', icon: 'fa-users', color: 'text-purple-600', value: stats?.total_customers },
                { key: 'total_products', icon: 'fa-box', color: 'text-orange-600', value: stats?.total_products }
            ];

            return (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    {statCards.map((stat) => (
                        <div key={stat.key} className={`p-6 rounded-lg shadow ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                            <div className="flex items-center">
                                <div className={`p-3 rounded-full bg-gray-100 ${darkMode ? 'bg-gray-700' : ''}`}>
                                    <i className={`fas ${stat.icon} ${stat.color} text-xl`}></i>
                                </div>
                                <div className="mr-4">
                                    <p className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>
                                        {t(stat.key)}
                                    </p>
                                    <p className={`text-2xl font-bold arabic-nums ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                                        {stat.value?.toLocaleString()}{stat.suffix || ''}
                                    </p>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        // Products Management Component
        const ProductsManager = () => {
            const [products, setProducts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const { darkMode } = useAdmin();
            const { t } = useTranslation();

            useEffect(() => {
                fetchProducts();
            }, []);

            const fetchProducts = async () => {
                try {
                    const data = await adminApi.getProducts();
                    setProducts(data.data || data);
                } catch (error) {
                    console.error('Failed to fetch products:', error);
                    // Fallback data
                    setProducts([
                        {
                            id: 1,
                            name: 'لابتوب Dell XPS 13',
                            price: 45000,
                            category: 'laptops',
                            in_stock: true,
                            image: 'https://images.pexels.com/photos/205421/pexels-photo-205421.jpeg?auto=compress&cs=tinysrgb&w=200'
                        }
                    ]);
                } finally {
                    setLoading(false);
                }
            };

            const handleDelete = async (id) => {
                if (confirm(t('confirm_delete'))) {
                    try {
                        await adminApi.deleteProduct(id);
                        setProducts(products.filter(p => p.id !== id));
                    } catch (error) {
                        console.error('Failed to delete product:', error);
                        alert('فشل في حذف المنتج');
                    }
                }
            };

            const filteredProducts = products.filter(product =>
                product.name.toLowerCase().includes(searchTerm.toLowerCase())
            );

            if (loading) {
                return (
                    <div className="text-center py-8">
                        <i className="fas fa-spinner fa-spin text-4xl text-orange-600 mb-4"></i>
                        <p className={darkMode ? 'text-gray-300' : 'text-gray-600'}>{t('loading')}</p>
                    </div>
                );
            }

            return (
                <div>
                    <div className="flex justify-between items-center mb-6">
                        <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                            {t('products')}
                        </h2>
                        <button className="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700">
                            <i className="fas fa-plus ml-2"></i>
                            {t('add_product')}
                        </button>
                    </div>

                    <div className="mb-4">
                        <input
                            type="text"
                            placeholder={t('search')}
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${
                                darkMode 
                                    ? 'bg-gray-700 border-gray-600 text-white' 
                                    : 'bg-white border-gray-300 text-gray-900'
                            }`}
                        />
                    </div>

                    <div className={`rounded-lg shadow overflow-hidden ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>
                        <table className="min-w-full">
                            <thead className={darkMode ? 'bg-gray-700' : 'bg-gray-50'}>
                                <tr>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        الصورة
                                    </th>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        {t('name')}
                                    </th>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        {t('price')}
                                    </th>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        {t('category')}
                                    </th>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        {t('status')}
                                    </th>
                                    <th className={`px-6 py-3 text-right text-xs font-medium uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                        {t('actions')}
                                    </th>
                                </tr>
                            </thead>
                            <tbody className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>
                                {filteredProducts.map((product) => (
                                    <tr key={product.id}>
                                        <td className="px-6 py-4 whitespace-nowrap">
                                            <img src={product.image} alt={product.name} className="h-12 w-12 rounded-lg object-cover" />
                                        </td>
                                        <td className={`px-6 py-4 whitespace-nowrap text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                                            {product.name}
                                        </td>
                                        <td className={`px-6 py-4 whitespace-nowrap text-sm arabic-nums ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                            {product.price?.toLocaleString()} جنيه
                                        </td>
                                        <td className={`px-6 py-4 whitespace-nowrap text-sm ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>
                                            {product.category === 'laptops' ? 'لابتوب' : 'إكسسوار'}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap">
                                            <span className={`px-2 py-1 text-xs font-semibold rounded-full ${
                                                product.in_stock 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : 'bg-red-100 text-red-800'
                                            }`}>
                                                {product.in_stock ? 'متوفر' : 'غير متوفر'}
                                            </span>
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button className="text-orange-600 hover:text-orange-900 ml-3">
                                                <i className="fas fa-edit"></i>
                                            </button>
                                            <button 
                                                onClick={() => handleDelete(product.id)}
                                                className="text-red-600 hover:text-red-900"
                                            >
                                                <i className="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                        
                        {filteredProducts.length === 0 && (
                            <div className="text-center py-8">
                                <p className={darkMode ? 'text-gray-300' : 'text-gray-500'}>{t('no_data')}</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main Admin Dashboard Component
        const AdminDashboard = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const { user, logout, darkMode, toggleDarkMode, toggleLanguage } = useAdmin();
            const { t } = useTranslation();

            const menuItems = [
                { key: 'dashboard', icon: 'fa-tachometer-alt', label: t('dashboard') },
                { key: 'products', icon: 'fa-box', label: t('products') },
                { key: 'categories', icon: 'fa-tags', label: t('categories') },
                { key: 'orders', icon: 'fa-shopping-cart', label: t('orders') },
                { key: 'customers', icon: 'fa-users', label: t('customers') },
                { key: 'settings', icon: 'fa-cog', label: t('settings') }
            ];

            const renderContent = () => {
                switch (activeTab) {
                    case 'dashboard':
                        return <DashboardStats />;
                    case 'products':
                        return <ProductsManager />;
                    case 'categories':
                        return <div className={`p-8 text-center ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>إدارة التصنيفات - قيد التطوير</div>;
                    case 'orders':
                        return <div className={`p-8 text-center ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>إدارة الطلبات - قيد التطوير</div>;
                    case 'customers':
                        return <div className={`p-8 text-center ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>إدارة العملاء - قيد التطوير</div>;
                    case 'settings':
                        return <div className={`p-8 text-center ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>الإعدادات - قيد التطوير</div>;
                    default:
                        return <DashboardStats />;
                }
            };

            return (
                <div className={`min-h-screen ${darkMode ? 'dark bg-slate-900' : 'bg-gray-100'}`}>
                    {/* Header */}
                    <header className={`shadow-sm ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border-b`}>
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between items-center py-4">
                                <div className="flex items-center">
                                    <div className="bg-orange-600 p-2 rounded-lg ml-3">
                                        <i className="fas fa-laptop text-white"></i>
                                    </div>
                                    <h1 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                                        لوحة إدارة AliensStore
                                    </h1>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <button
                                        onClick={toggleDarkMode}
                                        className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-700'}`}
                                    >
                                        <i className={`fas ${darkMode ? 'fa-sun' : 'fa-moon'}`}></i>
                                    </button>
                                    <button
                                        onClick={toggleLanguage}
                                        className={`p-2 rounded-lg ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-700'}`}
                                    >
                                        العربية / EN
                                    </button>
                                    <button
                                        onClick={logout}
                                        className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"
                                    >
                                        <i className="fas fa-sign-out-alt ml-2"></i>
                                        {t('logout')}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="flex">
                        {/* Sidebar */}
                        <nav className={`w-64 min-h-screen ${darkMode ? 'bg-gray-800' : 'bg-white'} shadow-sm`}>
                            <div className="p-4">
                                <ul className="space-y-2">
                                    {menuItems.map((item) => (
                                        <li key={item.key}>
                                            <button
                                                onClick={() => setActiveTab(item.key)}
                                                className={`w-full flex items-center px-4 py-2 text-right rounded-lg transition-colors ${
                                                    activeTab === item.key
                                                        ? 'bg-orange-600 text-white'
                                                        : darkMode
                                                            ? 'text-gray-300 hover:bg-gray-700'
                                                            : 'text-gray-700 hover:bg-gray-100'
                                                }`}
                                            >
                                                <i className={`fas ${item.icon} ml-3`}></i>
                                                {item.label}
                                            </button>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        </nav>

                        {/* Main Content */}
                        <main className="flex-1 p-8">
                            {renderContent()}
                        </main>
                    </div>
                </div>
            );
        };

        // Main App Component
        const AdminApp = () => {
            const { isAuthenticated, loading } = useAdmin();

            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <i className="fas fa-spinner fa-spin text-4xl text-orange-600"></i>
                    </div>
                );
            }

            return isAuthenticated ? <AdminDashboard /> : <LoginPage />;
        };

        // Render the app
        const App = () => (
            <AdminProvider>
                <AdminApp />
            </AdminProvider>
        );

        ReactDOM.render(<App />, document.getElementById('admin-root'));
    </script>
</body>
</html>